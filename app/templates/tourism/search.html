{% extends 'base.html' %}

{% block title %}Удалённый туризм — Room2room Tour{% endblock %}

{% block content %}
<div class="mb-3">
  <h1 class="h5 mb-2">Удалённый туризм</h1>
  <div class="d-flex gap-2 flex-wrap">
    <form method="get" class="flex-grow-1" role="search">
      {{ form.q(class_='form-control', placeholder='Поиск экскурсий...') }}
    </form>
    <a href="{{ url_for('tourism.tourism_new') }}" class="btn btn-accent">Создать предложение</a>
  </div>
</div>

<div class="list-group shadow-sm">
  {% for t in tours %}
    <a href="{{ url_for('tourism.tourism_detail', tour_id=t.id) }}" class="list-group-item list-group-item-action py-3">
      <div class="listing-row d-flex gap-3">
        <div class="flex-shrink-0 listing-media">
          <div class="ratio ratio-4x3 listing-thumb rounded">
            {% set photo = (t.photos[0] if t.photos and t.photos|length > 0 else url_for('static', filename='images/hero-mountains.png')) %}
            <img src="{{ photo|media }}" alt="" class="img-cover rounded" loading="lazy" decoding="async" sizes="(max-width: 576px) 100vw, 160px">
          </div>
        </div>
        <div class="flex-grow-1">
          <div class="d-flex justify-content-between align-items-start">
            <h2 class="h6 mb-1 text-dark">{{ t.title }}</h2>
            <span class="badge text-bg-light">{{ t.price_per_hour }} ₽/час · {{ t.duration_hours }} ч</span>
          </div>
          <div class="small text-muted mb-1">{{ t.city or 'Город' }}</div>
          {% if t.description %}
            <div class="small text-muted text-truncate-2">{{ t.description }}</div>
          {% endif %}
        </div>
      </div>
    </a>
  {% else %}
    <div class="text-muted">Пока нет предложений.</div>
  {% endfor %}
</div>
{% endblock %}


